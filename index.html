<!DOCTYPE html>
<html>

<head>
    <title>Test User Creation</title>
</head>

<body>
    <input type="text" id="connectionName" placeholder="Enter connection name"><br><br>
    <button onclick="triggCreateUser()">Create User</button>
    <button onclick="triggGetCompanies()">Get Companies</button>
    <button onclick="triggPostCompany()">Post Company</button>
    <div id="result"></div>
    <script>

        function triggCreateUser() {
            setInterval(createUser, 500);
        }
        function triggGetCompanies() {
            setInterval(getCompanies, 500);

        }
        function triggPostCompany() {
            setInterval(postCompany, 500);
        }

        function createUser() {
            const connectionNameInput = document.getElementById('connectionName');
            const connectionName = connectionNameInput.value.trim();

            const data = {
                "username": "ea3saaaasss4d",
                "fname": "asdasd",
                "lname": "asdasd",
                "phone": "77565656",
                "email": "osamafaroun7@gmal.com",
                "role": "1",
                "password": "5555555555",
                "image": "ad"
            };

            fetch(`http://localhost:4000/api/users/multi?connectionName=${connectionName}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result').textContent = `User created with ID: ${data.test.userId}`;
                })
                .catch(error => {
                    document.getElementById('result').textContent = `Error: ${error.message}`;
                });

        }

        function getCompanies() {
            const connectionNameInput = document.getElementById('connectionName');
            const connectionName = connectionNameInput.value.trim();

            if (connectionName === '') {
                alert('Please enter a connection name');
                return;
            }

            fetch(`http://localhost:4000/api/companies?connectionName=${connectionName}`, {
                method: 'GET'
            })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result').textContent = `Companies: ${JSON.stringify(data.companies)}`;
                })
                .catch(error => {
                    document.getElementById('result').textContent = `Error: ${error.message}`;
                });
        }

        function postCompany() {
            const connectionNameInput = document.getElementById('connectionName');
            const connectionName = connectionNameInput.value.trim();

            if (connectionName === '') {
                alert('Please enter a connection name');
                return;
            }

            const companyData = {
                "type_id": 1,
                "company_name": "aaaaaaaa",
                "organization_number": "22112",
                "contact_person": "osama faroun",
                "address": "asdas",
                "postcode": 33213,
                "city": "Halmstad",
                "email": "example@example.com",
                "phone": "90000223",
                "hour_cost": 60
            };

            fetch(`http://localhost:4000/api/company/new?connectionName=${connectionName}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(companyData)
            })
                .then(response => response.json())
                .then(data => {
                    document.getElementById('result').textContent = `Company created: ${JSON.stringify(data)}`;
                })
                .catch(error => {
                    document.getElementById('result').textContent = `Error: ${error.message}`;
                });
        }


        // Call postCompany every 5 seconds

        // Call createUser every 10 seconds


    </script>

</body>

</html>